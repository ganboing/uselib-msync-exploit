This bug is a race between uselib() and msync()  

Steps of triggering the bug:  
  
1\. Install Ubuntu 4.10 on Vmware workstation.  
http://old-releases.ubuntu.com/releases/warty/  
  
2\. After installation, modify /etc/apt/sources.list  
uncomment all sources excluding the security ones and change all "archive.ubuntu.com" to "old-releases.ubuntu.com"  
  
3\. Modify the mouse configuration to be compatible with 2.4 kernel  
[In gnome terminal]  
sudo xf86cfg  
click on the mouse icon -> configure mouse -> select /dev/psaux and Auto -> apply changes -> ok  

3\. run following command:  
sudo apt-get update  
sudo apt-get install gcc kernel-image-2.4.26-1-386 kernel-headers-2.4.26-1-386 kernel-source-2.4.26 libncurses5-dev  
during installation enter "n" to perform the installation  
  
4\. copy the files:  
scp the filemap.patch, msync-1sleep.c to your home folder  
  
5\. install the new kernel:  
sudo passwd root  
su  
cd /usr/src  
tar xvjf kernel-source-2.4.26.tar.bz2  
cd kernel-source-2.4.26/mm  
patch < /home/USER/filemap.patch  
cd ..  
cp /boot/config-2.4.26-1-386 .config  
make menuconfig  (you don't need to change anything, just exit and save)  
make all  
make bzImage  
make modules  
make modules_install  
cp arch/i386/boot/bzImage /boot/vmlinuz-2.4.26  
cp System.map /boot/System.map-2.4.26  
mkinitrd -o /boot/initrd.img-2.4.26 2.4.26  

6\. vim /boot/grub/menu.lst  
add the following:  
title	Ubuntu, Kernel 2.4.26  
root	(hd0,0)  
kernel	/boot/vmlinuz-2.4.26 root/dev/sda1 ro  
initrd	/boot/initrd.img-2.4.26  
savedefault  
boot  

7\. reboot  
select the self-built kernel ( you can choose it by default if you change the default option in menu.lst)  

8\. compile and run:  
gcc msync-1sleep.c  
./a.out  

The console output the following:  
You've done bad things!  
In addition to that, check the message buffer of the kernel by dmesg. We can see kernel panics.  
  
However, I have to say you need to **try many times** before success :(
